{{ define "main" }}
  <article>
    <h1>{{ .Title }}</h1>
    {{ if .Params.password }}
      <div id="password-protected" style="display:none;">
        <div id="encrypted-content">{{ .Content | base64Encode }}</div>
      </div>
      <div id="password-form">
        <p>这篇文章受密码保护，请输入密码查看：</p>
        <input type="password" id="password-input" placeholder="输入密码">
        <button onclick="checkPassword()">提交</button>
      </div>
      <script>
        function checkPassword() {
          const password = "{{ .Params.password }}";
          const input = document.getElementById('password-input').value;
          if (input === password) {
            const encryptedContent = document.getElementById('encrypted-content').innerText;
            const decodedContent = atob(encryptedContent);
            document.getElementById('password-protected').innerHTML = decodedContent;
            document.getElementById('password-form').style.display = 'none';
          } else {
            alert('密码错误，请重试！');
          }
        }
      </script>
    {{ else }}
      {{ .Content }}
    {{ end }}
  </article>
{{ end }}
